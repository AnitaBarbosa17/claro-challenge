{"version":3,"file":"planby.esm.js","sources":["../src/Epg/styles/global.styles.ts","../src/Epg/styles/Epg.styles.ts","../src/Epg/styles/Channels.styles.ts","../src/Epg/styles/Channel.styles.ts","../src/Epg/styles/Program.styles.ts","../src/Epg/helpers/variables.ts","../src/Epg/helpers/common.ts","../src/Epg/helpers/time.ts","../src/Epg/helpers/epg.ts","../src/Epg/styles/Timeline.styles.ts","../src/Epg/styles/Line.styles.ts","../src/Epg/styles/Loader.styles.ts","../src/Epg/components/Layout.tsx","../src/Epg/theme/theme.ts","../src/Epg/hooks/useLayout.tsx","../src/Epg/hooks/useEpg.tsx","../src/Epg/hooks/useInterval.tsx","../src/Epg/hooks/useProgram.tsx","../src/Epg/hooks/useTimeline.tsx","../src/Epg/components/Program.tsx","../src/Epg/components/Channels.tsx","../src/Epg/components/Channel.tsx","../src/Epg/components/Timeline.tsx","../src/Epg/components/Line/useLine.tsx","../src/Epg/components/Line/Line.tsx","../src/Epg/components/Loader.tsx","../src/Epg/Epg.tsx","../src/Epg/index.ts"],"sourcesContent":["import { css } from \"@emotion/react\";\n\nexport const globalStyles = css`\n  @import url(\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap\");\n\n  .planby {\n    font-family: \"Inter\", system-ui, -apple-system,\n      /* Firefox supports this but not yet system-ui */ \"Segoe UI\", Roboto,\n      Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\"; /* 2 */\n  }\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { Theme } from \"../helpers\";\n\nexport const Container = styled.div<{\n  height?: number;\n  width?: number;\n}>`\n  padding: 5px;\n  height: ${({ height }) => (height ? `${height}px` : \"100%\")};\n  width: ${({ width }) => (width ? `${width}px` : \"100%\")};\n\n  *,\n  ::before,\n  ::after {\n    box-sizing: border-box;\n  }\n`;\n\nexport const Wrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 6px;\n  overflow: hidden;\n`;\n\nexport const ScrollBox = styled.div<{ theme?: Theme; isRTL?: boolean }>`\n  height: 100%;\n  width: 100%;\n  position: relative;\n  overflow: auto;\n  scroll-behavior: smooth;\n  background: ${({ theme }) => theme.primary[900]};\n\n  ${({ isRTL }) => isRTL && `transform: scale(-1,1)`};\n\n  ::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: ${({ theme }) => theme.scrollbar.thumb.bg};\n    border: 10px none ${({ theme }) => theme.white};\n    border-radius: 20px;\n  }\n  ::-webkit-scrollbar-thumb:hover {\n    background: ${({ theme }) => theme.white};\n  }\n\n  ::-webkit-scrollbar-track {\n    background: ${({ theme }) => theme.primary[900]};\n    border: 22px none ${({ theme }) => theme.white};\n    border-radius: 0px;\n  }\n\n  ::-webkit-scrollbar-corner {\n    background: ${({ theme }) => theme.primary[900]};\n  }\n`;\n\nexport const Box = styled.div<{\n  isRTL?: boolean;\n  width: number;\n  height: number;\n  left?: number;\n  top?: number;\n  theme?: Theme;\n}>`\n  position: absolute;\n  height: ${({ height }) => height}px;\n  width: ${({ width }) => width}px;\n  top: ${({ top = 0 }) => top}px;\n  background: ${({ theme }) => theme.primary[900]};\n  z-index: 90;\n\n  ${({ isRTL, left = 0 }) => (isRTL ? `right:0px;` : ` left: ${left}px`)};\n`;\n\nexport const Content = styled.div<{\n  width: number;\n  height: number;\n  sidebarWidth: number;\n  isSidebar: boolean;\n  theme?: Theme;\n}>`\n  background: ${({ theme }) => theme.primary[900]};\n  height: ${({ height }) => height}px;\n  width: ${({ width }) => width}px;\n  position: relative;\n  left: ${({ isSidebar, sidebarWidth }) => (isSidebar ? sidebarWidth : 0)}px;\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { Theme } from \"../helpers\";\n\nexport const Box = styled.div<{\n  isTimeline: boolean;\n  isRTL: boolean;\n  width: number;\n  bottom: number;\n  theme?: Theme;\n}>`\n  position: sticky;\n  width: ${({ width }) => width}px;\n  float: left;\n  bottom: ${({ bottom }) => bottom}px;\n  left: 0;\n  z-index: 10;\n  background-color: ${({ theme }) => theme.primary[900]};\n\n  ${({ isRTL }) => isRTL && `transform: scale(-1,1)`};\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { Theme } from \"../helpers\";\n\nexport const ChannelBox = styled.div<{\n  top: number;\n  height: number;\n  theme?: Theme;\n}>`\n  position: absolute;\n  top: ${({ top }) => top}px;\n  height: ${({ height }) => height}px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ${({ theme }) => theme.primary[900]};\n`;\n\nexport const ChannelLogo = styled.img`\n  max-height: 60px;\n  max-width: 60px;\n  position: relative;\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { Theme } from \"../helpers\";\n\nexport const ProgramBox = styled.div<{ width: number }>`\n  position: absolute;\n  padding: ${({ width }) => (width === 0 ? 0 : 4)}px;\n  overflow: hidden;\n`;\n\nexport const ProgramContent = styled.div<{\n  isLive: boolean;\n  width: number;\n  theme?: Theme;\n}>`\n  position: relative;\n  display: flex;\n  font-size: 11px;\n  height: 100%;\n  border-radius: 8px;\n  padding: 10px ${({ width }) => (width < 30 ? 4 : 20)}px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.4s ease-in-out;\n  z-index: 1;\n  background: ${({ theme: { primary } }) =>\n    `linear-gradient(to right, ${primary[600]}, ${primary[600]})`};\n  &:hover {\n    background: ${({ theme: { gradient } }) =>\n      `linear-gradient(to right, ${gradient.blue[900]}, ${gradient.blue[600]})`};\n  }\n\n  ${({ isLive, theme: { gradient } }) =>\n    isLive &&\n    `background: linear-gradient(to right, ${gradient.blue[900]}, ${gradient.blue[600]},${gradient.blue[300]})`}\n`;\n\nexport const ProgramFlex = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-start;\n`;\n\nconst Elipsis = `\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nexport const ProgramTitle = styled.p<{ theme?: Theme }>`\n  font-size: 14px;\n  text-align: left;\n  margin-top: 0;\n  margin-bottom: 5px;\n  font-weight: 500;\n  color: ${({ theme }) => theme.grey[300]};\n  ${Elipsis}\n`;\n\nexport const ProgramText = styled.span<{ theme?: Theme }>`\n  display: block;\n  font-size: 12.5px;\n  font-weight: 400;\n  color: ${({ theme }) => theme.text.grey[500]};\n  text-align: left;\n  ${Elipsis}\n`;\n\nexport const ProgramImage = styled.img`\n  margin-right: 15px;\n  border-radius: 6px;\n  width: 100px;\n`;\n\nexport const ProgramStack = styled.div<{ isRTL?: boolean }>`\n  overflow: hidden;\n  ${({ isRTL }) =>\n    isRTL &&\n    `transform: scale(-1,1); \n     display: flex; \n     flex-direction: column; \n     align-items: flex-end`};\n`;\n","// Dimensions\nexport const DAY_WIDTH = 7200;\nexport const HOURS_IN_DAY = 24;\n\nexport const HOUR_IN_MINUTES = 60;\n\nexport const TIMELINE_HEIGHT = 60;\n\nexport const SIDEBAR_WIDTH = 100;\nexport const ITEM_HEIGHT = 80;\n\nexport const ITEM_OVERSCAN = ITEM_HEIGHT;\n\n// Debounce\nexport const DEBOUNCE_WAIT = 100;\nexport const DEBOUNCE_WAIT_MAX = 100;\n\n// Program refresh\nexport const PROGRAM_REFRESH = 120000;\n\n// Theme\nexport const THEME_MODE = {\n  DARK: \"dark\",\n  LIGHT: \"light\",\n};\n\nexport const TIME_FORMAT = {\n  DEFAULT: \"yyyy-MM-dd HH:mm:ss\",\n  DATE: \"yyyy-MM-dd\",\n  HOURS_MIN: \"HH:mm\",\n  BASE_HOURS_TIME: \"h:mm a\",\n};\n","import { useLayoutEffect, useEffect } from \"react\";\nimport { differenceInHours, startOfDay } from \"date-fns\";\nimport { HOURS_IN_DAY } from \"./variables\";\n\ntype DateTime = string | number | Date;\n\ntype OmitObjectType = { [key: string]: any };\nexport const omit = (obj: OmitObjectType, ...props: string[]) => {\n  const result = { ...obj };\n\n  for (const property of props) {\n    delete result[property];\n  }\n\n  return result;\n};\n\nexport const generateArray = (num: number) => new Array(num).fill(\"\");\n\ntype ProgramOptions = {\n  position: { width: number; height: number; top: number; left: number };\n};\nexport const getProgramOptions = <T extends ProgramOptions>(program: T) => {\n  const { width, height, top, left } = program.position;\n  return {\n    ...program,\n    position: { width, height, top, left },\n  };\n};\n\nexport const useIsomorphicLayoutEffect = () =>\n  typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\nexport const getHourWidth = (dayWidth: number) => dayWidth / HOURS_IN_DAY;\n\nexport const getDate = (date: DateTime) => new Date(date);\n\nconst abs = (num: number) => Math.abs(num);\ninterface DayWidth {\n  dayWidth: number;\n  startDate: DateTime;\n  endDate: DateTime;\n}\nexport const getDayWidthResources = ({\n  dayWidth,\n  startDate,\n  endDate,\n}: DayWidth) => {\n  const startDateTime = getDate(startDate);\n  const endDateTime = getDate(endDate);\n\n  if (endDateTime < startDateTime) {\n    console.error(\n      `Invalid endDate property. Value of endDate must be greater than startDate. Props: startDateTime: ${startDateTime}, endDateTime: ${endDateTime}`\n    );\n  }\n\n  const offsetStartHoursRange = differenceInHours(\n    startDateTime,\n    startOfDay(startDateTime)\n  );\n\n  const numberOfHoursInDay = differenceInHours(endDateTime, startDateTime);\n  const hourWidth = Math.floor(dayWidth / numberOfHoursInDay);\n  const newDayWidth = hourWidth * numberOfHoursInDay;\n\n  return {\n    hourWidth: abs(hourWidth),\n    dayWidth: abs(newDayWidth),\n    numberOfHoursInDay: abs(numberOfHoursInDay),\n    offsetStartHoursRange: abs(offsetStartHoursRange),\n  };\n};\n","import { format, roundToNearestMinutes, startOfDay, addDays } from \"date-fns\";\n\n// Import types\nimport { DateTime as DateRangeTime } from \"./types\";\n\n// Variables\nimport { TIME_FORMAT } from \"./variables\";\n\ntype DateTime = number | string | Date;\n\nconst getTime = (date: DateTime) => new Date(date).getTime();\n\nexport const getLiveStatus = (since: DateTime, till: DateTime) => {\n  const nowTime = getTime(new Date());\n  const sinceTime = getTime(since);\n  const sinceTill = getTime(till);\n  return nowTime >= sinceTime && sinceTill > nowTime;\n};\n\nexport const formatTime = (date: DateTime) =>\n  format(new Date(date), TIME_FORMAT.DEFAULT).replace(/\\s/g, \"T\");\n\nexport const roundToMinutes = (date: DateTime) =>\n  roundToNearestMinutes(new Date(date));\n\nexport const isYesterday = (since: DateTime, startDate: DateTime) => {\n  const sinceTime = getTime(new Date(since));\n  const startDateTime = getTime(new Date(startDate));\n\n  return startDateTime > sinceTime;\n};\n\nexport const isFutureTime = (date: DateTime) => {\n  const dateTime = getTime(new Date(date));\n  const now = getTime(new Date());\n  return dateTime > now;\n};\n\nexport const getTimeRangeDates = (\n  startDate: DateRangeTime,\n  endDate: DateRangeTime\n) => {\n  let endDateValue = endDate;\n  if (endDate === \"\") {\n    endDateValue = formatTime(startOfDay(addDays(new Date(startDate), 1)));\n  }\n\n  return { startDate, endDate: endDateValue };\n};\n","import { differenceInMinutes, getTime } from \"date-fns\";\n\n// Import interfaces\nimport { Channel, Program } from \"./interfaces\";\n\n// Import types\nimport { ProgramWithPosition, Position, DateTime } from \"./types\";\n\n// Import variables\nimport { HOUR_IN_MINUTES } from \"./variables\";\n\n// Import time heleprs\nimport {\n  formatTime,\n  roundToMinutes,\n  isYesterday as isYesterdayTime,\n} from \"./time\";\nimport { getDate } from \"./common\";\n\n// -------- Program width --------\nconst getItemDiffWidth = (diff: number, hourWidth: number) =>\n  (diff * hourWidth) / HOUR_IN_MINUTES;\n\nexport const getPositionX = (\n  since: DateTime,\n  till: DateTime,\n  startDate: DateTime,\n  endDate: DateTime,\n  hourWidth: number\n) => {\n  const isTomorrow = getTime(getDate(till)) > getTime(getDate(endDate));\n  const isYesterday = getTime(getDate(since)) < getTime(getDate(startDate));\n\n  // When time range is set to 1 hour and program time is greater than 1 hour\n  if (isYesterday && isTomorrow) {\n    const diffTime = differenceInMinutes(\n      roundToMinutes(getDate(endDate)),\n      getDate(startDate)\n    );\n    return getItemDiffWidth(diffTime, hourWidth);\n  }\n\n  if (isYesterday) {\n    const diffTime = differenceInMinutes(\n      roundToMinutes(getDate(till)),\n      getDate(startDate)\n    );\n    return getItemDiffWidth(diffTime, hourWidth);\n  }\n\n  if (isTomorrow) {\n    const diffTime = differenceInMinutes(\n      getDate(endDate),\n      roundToMinutes(getDate(since))\n    );\n\n    if (diffTime < 0) return 0;\n    return getItemDiffWidth(diffTime, hourWidth);\n  }\n\n  const diffTime = differenceInMinutes(\n    roundToMinutes(getDate(till)),\n    roundToMinutes(getDate(since))\n  );\n\n  return getItemDiffWidth(diffTime, hourWidth);\n};\n\n// -------- Channel position in the Epg --------\nexport const getChannelPosition = (\n  channelIndex: number,\n  itemHeight: number\n) => {\n  const top = itemHeight * channelIndex;\n  const position = {\n    top,\n    height: itemHeight,\n  };\n  return position;\n};\n// -------- Program position in the Epg --------\nexport const getProgramPosition = (\n  program: Program,\n  channelIndex: number,\n  itemHeight: number,\n  hourWidth: number,\n  startDate: DateTime,\n  endDate: DateTime\n) => {\n  const item = {\n    ...program,\n    since: formatTime(program.since),\n    till: formatTime(program.till),\n  };\n  const isYesterday = isYesterdayTime(item.since, startDate);\n\n  let width = getPositionX(\n    item.since,\n    item.till,\n    startDate,\n    endDate,\n    hourWidth\n  );\n  const top = itemHeight * channelIndex;\n  let left = getPositionX(startDate, item.since, startDate, endDate, hourWidth);\n  const edgeEnd = getPositionX(\n    startDate,\n    item.till,\n    startDate,\n    endDate,\n    hourWidth\n  );\n\n  if (isYesterday) left = 0;\n  // If item has negative top position, it means that it is not visible in this day\n  if (top < 0) width = 0;\n\n  const position = {\n    width,\n    height: itemHeight,\n    top,\n    left,\n    edgeEnd,\n  };\n  return { position, data: item };\n};\n\n// -------- Converted programs with position data --------\ninterface ConvertedPrograms {\n  data: Program[];\n  channels: Channel[];\n  startDate: DateTime;\n  endDate: DateTime;\n  itemHeight: number;\n  hourWidth: number;\n}\nexport const getConvertedPrograms = ({\n  data,\n  channels,\n  startDate,\n  endDate,\n  itemHeight,\n  hourWidth,\n}: ConvertedPrograms) =>\n  data.map((next) => {\n    const channelIndex = channels.findIndex(\n      ({ uuid }) => uuid === next.channelUuid\n    );\n    return getProgramPosition(\n      next,\n      channelIndex,\n      itemHeight,\n      hourWidth,\n      startDate,\n      endDate\n    );\n  }, [] as ProgramWithPosition[]);\n\n// -------- Converted channels with position data --------\nexport const getConvertedChannels = (channels: Channel[], itemHeight: number) =>\n  channels.map((channel, index) => ({\n    ...channel,\n    position: getChannelPosition(index, itemHeight),\n  }));\n\n// -------- Dynamic virtual program visibility in the EPG --------\nexport const getItemVisibility = (\n  position: Position,\n  scrollY: number,\n  scrollX: number,\n  containerHeight: number,\n  containerWidth: number,\n  itemOverscan: number\n) => {\n  if (position.width <= 0) {\n    return false;\n  }\n\n  if (scrollY > position.top + itemOverscan * 3) {\n    return false;\n  }\n\n  if (scrollY + containerHeight <= position.top) {\n    return false;\n  }\n\n  if (\n    scrollX + containerWidth >= position.left &&\n    scrollX <= position.edgeEnd\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const getSidebarItemVisibility = (\n  position: Pick<Position, \"top\">,\n  scrollY: number,\n  containerHeight: number,\n  itemOverscan: number\n) => {\n  if (scrollY > position.top + itemOverscan * 3) {\n    return false;\n  }\n\n  if (scrollY + containerHeight <= position.top) {\n    return false;\n  }\n\n  return true;\n};\n","import styled from \"@emotion/styled/macro\";\nimport { Theme } from \"../helpers\";\n\n// Import heleprs\nimport { ITEM_HEIGHT } from \"../helpers\";\n\nexport const TimelineTime = styled.span<{\n  theme?: Theme;\n  isBaseTimeFormat?: boolean;\n  isRTL?: boolean;\n}>`\n  color: ${({ theme }) => theme.text.grey[300]};\n  position: absolute;\n  top: 18px;\n  left: ${({ isRTL, isBaseTimeFormat }) =>\n    isRTL && isBaseTimeFormat ? \"-32\" : \"-18\"}px;\n\n  ${({ isRTL }) => isRTL && `transform: scale(-1,1)`};\n`;\n\nexport const TimelineDividers = styled.div`\n  height: 100%;\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  align-items: end;\n  padding-bottom: 6px;\n`;\n\nexport const TimelineDivider = styled.div<{ width: number; theme?: Theme }>`\n  background: ${({ theme }) => theme.timeline.divider.bg};\n  height: 10px;\n  width: 1px;\n  margin-right: ${({ width }) => width / 4}px;\n`;\n\nexport const TimelineWrapper = styled.div<{\n  isSidebar: boolean;\n  dayWidth: number;\n  sidebarWidth: number;\n  theme?: Theme;\n}>`\n  position: sticky;\n  top: 0;\n  left: ${({ isSidebar, sidebarWidth }) => (isSidebar ? sidebarWidth : 0)}px;\n  z-index: 10;\n  display: flex;\n  height: ${ITEM_HEIGHT - 20}px;\n  width: ${({ dayWidth }) => dayWidth}px;\n  background: ${({ theme }) => theme.primary[900]};\n`;\n\nexport const TimelineBox = styled.div<{ width: number }>`\n  width: ${({ width }) => width}px;\n  font-size: 14px;\n  position: relative;\n\n  &:first-of-type {\n    ${TimelineTime} {\n      left: 0px;\n    }\n  }\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { Theme } from \"../helpers\";\n\nexport const Box = styled.div<{ height: number; left: number; theme?: Theme }>`\n  position: absolute;\n  top: 64px;\n  left: ${({ left }) => left}px;\n  height: ${({ height }) => height}px;\n  width: 3px;\n  background: ${({ theme }) => theme.green[300]};\n  pointer-events: none;\n  z-index: 10;\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { keyframes } from \"@emotion/react\";\nimport { Theme } from \"../helpers\";\n\nconst time = [0, 50, 0];\n\nconst moveLeft = (animate: { right: string[] }) => keyframes`\n${time.map(\n  (item, index) => `${item}% {\n  transform: translateX(-${animate.right[index]});\n}`\n)}\n`;\n\nexport const Box = styled.div<{ theme?: Theme }>`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  background: ${({ theme }) => theme.loader.bg};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n`;\n\nexport const Shape = styled.div<{\n  width: number;\n  color: string;\n  marginRight?: number;\n  transition: { duration: number; ease?: string; delay?: number };\n  animate: { right: string[] };\n  theme?: Theme;\n}>`\n  width: ${({ width }) => width * 0.42}px;\n  background: ${({ color }) => color};\n  height: 18px;\n  border-radius: 45px;\n  margin-right: ${({ marginRight }) => marginRight ?? 0}px;\n  animation-name: ${({ animate }) => moveLeft(animate)};\n  animation-duration: ${({ transition }) => transition.duration}s;\n  animation-timing-function: ${({ transition }) =>\n    transition.ease ?? \"ease-in-out\"};\n  animation-delay: ${({ transition }) => transition.delay ?? 0}s;\n  animation-iteration-count: infinite;\n`;\n","import React from \"react\";\n\n// Import types\nimport {\n  ProgramItem,\n  ProgramWithPosition,\n  ChannelWithPosiiton,\n  DateTime,\n  Position,\n  BaseTimeFormat,\n} from \"../helpers/types\";\n\n// Import helpers\nimport { getProgramOptions, isFutureTime } from \"../helpers\";\n\n// Import styles\nimport { EpgStyled } from \"../styles\";\n\n// Import components\nimport { Timeline, Channels, Program, Line } from \"../components\";\n\ninterface RenderTimeline {\n  isBaseTimeFormat: BaseTimeFormat;\n  isSidebar: boolean;\n  isRTL: boolean;\n  sidebarWidth: number;\n  hourWidth: number;\n  numberOfHoursInDay: number;\n  offsetStartHoursRange: number;\n  dayWidth: number;\n}\n\ninterface LayoutProps {\n  programs: ProgramItem[];\n  channels: ChannelWithPosiiton[];\n  startDate: DateTime;\n  endDate: DateTime;\n  scrollY: number;\n  dayWidth: number;\n  hourWidth: number;\n  numberOfHoursInDay: number;\n  offsetStartHoursRange: number;\n  sidebarWidth: number;\n  itemHeight: number;\n  onScroll: (\n    e: React.UIEvent<HTMLDivElement, UIEvent> & { target: Element }\n  ) => void;\n  isRTL?: boolean;\n  isBaseTimeFormat?: BaseTimeFormat;\n  isSidebar?: boolean;\n  isTimeline?: boolean;\n  isLine?: boolean;\n  isProgramVisible: (position: Position) => boolean;\n  isChannelVisible: (position: Pick<Position, \"top\">) => boolean;\n  renderProgram?: (v: {\n    program: ProgramItem;\n    isRTL: boolean;\n    isBaseTimeFormat: BaseTimeFormat;\n  }) => React.ReactNode;\n  renderChannel?: (v: { channel: ChannelWithPosiiton }) => React.ReactNode;\n  renderTimeline?: (v: RenderTimeline) => React.ReactNode;\n}\n\nconst { ScrollBox, Content } = EpgStyled;\n\nexport const Layout = React.forwardRef<HTMLDivElement, LayoutProps>(\n  (props, scrollBoxRef) => {\n    const { channels, programs, startDate, endDate, scrollY } = props;\n    const { dayWidth, hourWidth, sidebarWidth, itemHeight } = props;\n    const { numberOfHoursInDay, offsetStartHoursRange } = props;\n    const {\n      isSidebar = true,\n      isTimeline = true,\n      isLine = true,\n      isBaseTimeFormat = false,\n      isRTL = false,\n    } = props;\n\n    const {\n      onScroll,\n      isProgramVisible,\n      isChannelVisible,\n      renderProgram,\n      renderChannel,\n      renderTimeline,\n    } = props;\n\n    const channelsLength = channels.length;\n    const contentHeight = React.useMemo(() => channelsLength * itemHeight, [\n      channelsLength,\n      itemHeight,\n    ]);\n    const isFuture = isFutureTime(endDate);\n\n    const renderPrograms = (program: ProgramWithPosition) => {\n      const { position } = program;\n      const isVisible = isProgramVisible(position);\n\n      if (isVisible) {\n        const options = getProgramOptions(program);\n        if (renderProgram)\n          return renderProgram({\n            program: options,\n            isRTL,\n            isBaseTimeFormat,\n          });\n        return (\n          <Program\n            key={program.data.id}\n            isRTL={isRTL}\n            isBaseTimeFormat={isBaseTimeFormat}\n            program={options}\n          />\n        );\n      }\n      return null;\n    };\n\n    const renderTopbar = () => {\n      const props = {\n        sidebarWidth,\n        isSidebar,\n        isRTL,\n        dayWidth,\n        numberOfHoursInDay,\n      };\n      const timeProps = {\n        offsetStartHoursRange,\n        numberOfHoursInDay,\n        isBaseTimeFormat,\n        hourWidth,\n      };\n      if (renderTimeline) {\n        return renderTimeline({ ...timeProps, ...props });\n      }\n      return <Timeline {...timeProps} {...props} />;\n    };\n\n    return (\n      <ScrollBox isRTL={isRTL} ref={scrollBoxRef} onScroll={onScroll}>\n        {isLine && isFuture && (\n          <Line\n            dayWidth={dayWidth}\n            hourWidth={hourWidth}\n            sidebarWidth={sidebarWidth}\n            startDate={startDate}\n            endDate={endDate}\n            height={contentHeight}\n          />\n        )}\n        {isTimeline && renderTopbar()}\n        {isSidebar && (\n          <Channels\n            isRTL={isRTL}\n            isTimeline={isTimeline}\n            isChannelVisible={isChannelVisible}\n            sidebarWidth={sidebarWidth}\n            channels={channels as ChannelWithPosiiton[]}\n            scrollY={scrollY}\n            renderChannel={renderChannel}\n          />\n        )}\n        <Content\n          data-testid=\"content\"\n          sidebarWidth={sidebarWidth}\n          isSidebar={isSidebar}\n          width={dayWidth}\n          height={contentHeight}\n        >\n          {programs.map((program) =>\n            renderPrograms(program as ProgramWithPosition)\n          )}\n        </Content>\n      </ScrollBox>\n    );\n  }\n);\n","export const theme = {\n  primary: {\n    600: \"#1a202c\",\n    900: \"#171923\",\n  },\n  grey: { 300: \"#d1d1d1\" },\n  white: \"#fff\",\n  green: {\n    300: \"#2C7A7B\",\n  },\n  loader: {\n    teal: \"#5DDADB\",\n    purple: \"#3437A2\",\n    pink: \"#F78EB6\",\n    bg: \"#171923db\",\n  },\n  scrollbar: {\n    border: \"#ffffff\",\n    thumb: {\n      bg: \"#e1e1e1\",\n    },\n  },\n\n  gradient: {\n    blue: {\n      300: \"#002eb3\",\n      600: \"#002360\",\n      900: \"#051937\",\n    },\n  },\n\n  text: {\n    grey: {\n      300: \"#a0aec0\",\n      500: \"#718096\",\n    },\n  },\n\n  timeline: {\n    divider: {\n      bg: \"#718096\",\n    },\n  },\n};\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { startOfToday, isToday as isTodayFns } from \"date-fns\";\n\n// Import types\nimport { DateTime } from \"../helpers/types\";\n\n// Import heleprs\nimport {\n  DEBOUNCE_WAIT,\n  DEBOUNCE_WAIT_MAX,\n  getPositionX,\n  useIsomorphicLayoutEffect,\n} from \"../helpers\";\n\ninterface useLayoutProps {\n  height?: number;\n  width?: number;\n  hourWidth: number;\n  sidebarWidth: number;\n  startDate: DateTime;\n  endDate: DateTime;\n}\n\nexport function useLayout({\n  height,\n  width,\n  startDate,\n  endDate,\n  hourWidth,\n  sidebarWidth,\n}: useLayoutProps) {\n  const useIsomorphicEffect = useIsomorphicLayoutEffect();\n\n  const containerRef = React.useRef<HTMLDivElement>(null);\n  const scrollBoxRef = React.useRef<HTMLDivElement>(null);\n  //-------- State --------\n  const [scrollY, setScrollY] = React.useState<number>(0);\n  const [scrollX, setScrollX] = React.useState<number>(0);\n  const [layoutWidth, setLayoutWidth] = React.useState<number>(width as number);\n  const [layoutHeight, setLayoutHeight] = React.useState<number>(\n    height as number\n  );\n  const isToday = isTodayFns(new Date(startDate));\n\n  // -------- Handlers --------\n  const handleScrollDebounced = useDebouncedCallback(\n    (value) => {\n      setScrollY(value.y);\n      setScrollX(value.x);\n    },\n    DEBOUNCE_WAIT,\n    { maxWait: DEBOUNCE_WAIT_MAX }\n  );\n\n  const handleOnScroll = React.useCallback(\n    (e: React.UIEvent<HTMLDivElement, UIEvent> & { target: Element }) => {\n      handleScrollDebounced({ y: e.target.scrollTop, x: e.target.scrollLeft });\n    },\n    [handleScrollDebounced]\n  );\n\n  const handleOnScrollToNow = React.useCallback(() => {\n    if (scrollBoxRef?.current && isToday) {\n      const clientWidth = (width ??\n        containerRef.current?.clientWidth) as number;\n\n      const newDate = new Date();\n      const scrollPosition = getPositionX(\n        startOfToday(),\n        newDate,\n        startDate,\n        endDate,\n        hourWidth\n      );\n      const scrollNow = scrollPosition - clientWidth / 2 + sidebarWidth;\n      scrollBoxRef.current.scrollLeft = scrollNow;\n    }\n  }, [isToday, startDate, endDate, width, sidebarWidth, hourWidth]);\n\n  const handleOnScrollTop = React.useCallback(\n    (value: number = hourWidth) => {\n      if (scrollBoxRef?.current) {\n        const top = scrollBoxRef.current.scrollTop + value;\n        scrollBoxRef.current.scrollTop = top;\n      }\n    },\n    [hourWidth]\n  );\n\n  const handleOnScrollRight = React.useCallback(\n    (value: number = hourWidth) => {\n      if (scrollBoxRef?.current) {\n        const right = scrollBoxRef.current.scrollLeft + value;\n        scrollBoxRef.current.scrollLeft = right;\n      }\n    },\n    [hourWidth]\n  );\n\n  const handleOnScrollLeft = React.useCallback(\n    (value: number = hourWidth) => {\n      if (scrollBoxRef?.current) {\n        const left = scrollBoxRef.current.scrollLeft - value;\n        scrollBoxRef.current.scrollLeft = left;\n      }\n    },\n    [hourWidth]\n  );\n\n  const handleResizeDebounced = useDebouncedCallback(\n    () => {\n      if (containerRef?.current && !width) {\n        const container = containerRef.current;\n        const { clientWidth } = container;\n        setLayoutWidth(clientWidth);\n      }\n    },\n    DEBOUNCE_WAIT * 4,\n    { maxWait: DEBOUNCE_WAIT_MAX * 4 }\n  );\n\n  // -------- Efffects --------\n  useIsomorphicEffect(() => {\n    if (containerRef?.current) {\n      const container = containerRef.current;\n      if (!width) {\n        const { clientWidth } = container;\n        setLayoutWidth(clientWidth);\n      }\n      if (!height) {\n        const { clientHeight } = container;\n        setLayoutHeight(clientHeight);\n      }\n    }\n\n    if (scrollBoxRef?.current && isToday) {\n      handleOnScrollToNow();\n    }\n  }, [height, width, startDate, isToday, handleOnScrollToNow]);\n\n  useIsomorphicEffect(() => {\n    window.addEventListener(\"resize\", handleResizeDebounced);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResizeDebounced);\n    };\n  }, [width]);\n\n  return {\n    containerRef,\n    scrollBoxRef,\n    scrollX,\n    scrollY,\n    layoutWidth,\n    layoutHeight,\n    onScroll: handleOnScroll,\n    onScrollToNow: handleOnScrollToNow,\n    onScrollTop: handleOnScrollTop,\n    onScrollLeft: handleOnScrollLeft,\n    onScrollRight: handleOnScrollRight,\n  };\n}\n","import React from \"react\";\nimport { startOfToday } from \"date-fns\";\n\n// Import interfaces\nimport { Channel, Program, Theme } from \"../helpers/interfaces\";\n\n// Import types\nimport { DateTime, BaseTimeFormat, Position } from \"../helpers/types\";\n\n// Import helpers\nimport {\n  DAY_WIDTH,\n  ITEM_HEIGHT,\n  ITEM_OVERSCAN,\n  getDayWidthResources,\n  getTimeRangeDates,\n} from \"../helpers\";\n\n// Import theme\nimport { theme as defaultTheme } from \"../theme\";\n\n// Import heleprs\nimport {\n  SIDEBAR_WIDTH,\n  formatTime,\n  getConvertedChannels,\n  getConvertedPrograms,\n  getItemVisibility,\n  getSidebarItemVisibility,\n} from \"../helpers\";\n\n// Import components\nimport { useLayout } from \"./useLayout\";\n\ninterface useEpgProps {\n  channels: Channel[];\n  epg: Program[];\n  width?: number;\n  height?: number;\n  startDate?: DateTime;\n  endDate?: DateTime;\n  isBaseTimeFormat?: BaseTimeFormat;\n  isSidebar?: boolean;\n  isTimeline?: boolean;\n  isRTL?: boolean;\n  isLine?: boolean;\n  theme?: Theme;\n  globalStyles?: string;\n  dayWidth?: number;\n  sidebarWidth?: number;\n  itemHeight?: number;\n  itemOverscan?: number;\n}\n\nconst defaultStartDateTime = formatTime(startOfToday());\n\nexport function useEpg({\n  channels: channelsEpg,\n  epg,\n  startDate: startDateInput = defaultStartDateTime,\n  endDate: endDateInput = \"\",\n  isRTL = false,\n  isBaseTimeFormat = false,\n  isSidebar = true,\n  isTimeline = true,\n  isLine = true,\n  theme: customTheme,\n  globalStyles,\n  dayWidth: customDayWidth = DAY_WIDTH,\n  sidebarWidth = SIDEBAR_WIDTH,\n  itemHeight = ITEM_HEIGHT,\n  itemOverscan = ITEM_OVERSCAN,\n  width,\n  height,\n}: useEpgProps) {\n  // Get converted start and end dates\n  const { startDate, endDate } = getTimeRangeDates(\n    startDateInput,\n    endDateInput\n  );\n\n  // Get day and hour width of the day\n  const { hourWidth, dayWidth, ...dayWidthResourcesProps } = React.useMemo(\n    () =>\n      getDayWidthResources({ dayWidth: customDayWidth, startDate, endDate }),\n    [customDayWidth, startDate, endDate]\n  );\n\n  // -------- Effects --------\n  const { containerRef, scrollBoxRef, ...layoutProps } = useLayout({\n    startDate,\n    endDate,\n    sidebarWidth,\n    width,\n    height,\n    hourWidth,\n  });\n\n  const { scrollX, scrollY, layoutWidth, layoutHeight } = layoutProps;\n  const {\n    onScroll,\n    onScrollToNow,\n    onScrollTop,\n    onScrollLeft,\n    onScrollRight,\n  } = layoutProps;\n\n  //-------- Variables --------\n  const channels = React.useMemo(\n    () => getConvertedChannels(channelsEpg, itemHeight),\n    [channelsEpg, itemHeight]\n  );\n\n  const startDateTime = formatTime(startDate);\n  const endDateTime = formatTime(endDate);\n  const programs = React.useMemo(\n    () =>\n      getConvertedPrograms({\n        data: epg,\n        channels,\n        startDate: startDateTime,\n        endDate: endDateTime,\n        itemHeight,\n        hourWidth,\n      }),\n    [epg, channels, startDateTime, endDateTime, itemHeight, hourWidth]\n  );\n\n  const theme: Theme = customTheme || defaultTheme;\n\n  // -------- Handlers --------\n  const isProgramVisible = React.useCallback(\n    (position: Position) =>\n      getItemVisibility(\n        position,\n        scrollY,\n        scrollX,\n        layoutHeight,\n        layoutWidth,\n        itemOverscan\n      ),\n    [scrollY, scrollX, layoutHeight, layoutWidth, itemOverscan]\n  );\n\n  const isChannelVisible = React.useCallback(\n    (position: Pick<Position, \"top\">) =>\n      getSidebarItemVisibility(position, scrollY, layoutHeight, itemOverscan),\n    [scrollY, layoutHeight, itemOverscan]\n  );\n\n  const getEpgProps = () => ({\n    isRTL,\n    isSidebar,\n    isLine,\n    isTimeline,\n    width,\n    height,\n    sidebarWidth,\n    ref: containerRef,\n    theme,\n    globalStyles,\n  });\n\n  const getLayoutProps = () => ({\n    programs,\n    channels,\n    startDate,\n    endDate,\n    scrollY,\n    onScroll,\n    isRTL,\n    isBaseTimeFormat,\n    isSidebar,\n    isTimeline,\n    isLine,\n    isProgramVisible,\n    isChannelVisible,\n    dayWidth,\n    hourWidth,\n    sidebarWidth,\n    itemHeight,\n    ...dayWidthResourcesProps,\n    ref: scrollBoxRef,\n  });\n\n  return {\n    getEpgProps,\n    getLayoutProps,\n    onScrollToNow,\n    onScrollTop,\n    onScrollLeft,\n    onScrollRight,\n    scrollY,\n    scrollX,\n  };\n}\n","import React from \"react\";\n\n// Import heleprs\nimport { useIsomorphicLayoutEffect } from \"../helpers\";\n\nexport function useInterval(callback: () => void, delay: number | null) {\n  const useIsomorphicEffect = useIsomorphicLayoutEffect();\n  const savedCallback = React.useRef(callback);\n\n  useIsomorphicEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  React.useEffect(() => {\n    if (!delay && delay !== 0) {\n      return;\n    }\n\n    const id = setInterval(() => savedCallback.current(), delay);\n\n    return () => clearInterval(id);\n  }, [delay]);\n}\n","import React from \"react\";\nimport { format } from \"date-fns\";\n\n// Import types\nimport { ProgramItem, BaseTimeFormat } from \"../helpers/types\";\n\n// Import helpers\nimport { PROGRAM_REFRESH, TIME_FORMAT, getLiveStatus, omit } from \"../helpers\";\n\n// Import hooks\nimport { useInterval } from \"./useInterval\";\n\ninterface useProgramProps<T> {\n  program: T;\n  isRTL?: boolean;\n  isBaseTimeFormat: BaseTimeFormat;\n  minWidth?: number;\n}\n\nexport function useProgram<T extends ProgramItem>({\n  isRTL = false,\n  isBaseTimeFormat,\n  program,\n  minWidth = 200,\n}: useProgramProps<T>) {\n  const { data, position } = program;\n  const { width } = position;\n\n  const { since, till } = data;\n  const [isLive, setIsLive] = React.useState<boolean>(() =>\n    getLiveStatus(since, till)\n  );\n\n  const newPosition = omit(position, \"egdeEnd\");\n\n  const formatTime = (\n    date: string | number | Date,\n    formatType: string = TIME_FORMAT.HOURS_MIN\n  ) => format(new Date(date), formatType).replace(/\\s/g, \"\");\n\n  const set12HoursTimeFormat = () => {\n    if (isBaseTimeFormat) return TIME_FORMAT.BASE_HOURS_TIME;\n    return TIME_FORMAT.HOURS_MIN;\n  };\n\n  const getRTLSinceTime = (since: string | number | Date) =>\n    isRTL ? till : since;\n  const getRTLTillTime = (till: string | number | Date) =>\n    isRTL ? since : till;\n\n  useInterval(() => {\n    const status = getLiveStatus(since, till);\n    setIsLive(status);\n  }, PROGRAM_REFRESH);\n\n  const isMinWidth = width > minWidth;\n\n  return {\n    isLive,\n    isMinWidth,\n    isRTL,\n    formatTime,\n    set12HoursTimeFormat,\n    getRTLSinceTime,\n    getRTLTillTime,\n    styles: { width, position: newPosition },\n  };\n}\n","import { format } from \"date-fns\";\n\n// Import types\nimport { BaseTimeFormat } from \"../helpers/types\";\n\n// Import helpers\nimport { TIME_FORMAT, generateArray } from \"../helpers\";\n\nexport function useTimeline(\n  numberOfHoursInDay: number,\n  isBaseTimeFormat: BaseTimeFormat\n) {\n  const time = generateArray(numberOfHoursInDay);\n  const dividers = generateArray(4);\n\n  const formatTime = (index: number) => {\n    const date = new Date();\n    const baseDate = format(date, TIME_FORMAT.DATE);\n    const time = index < 10 ? `0${index}` : index;\n\n    if (isBaseTimeFormat) {\n      const date = new Date(`${baseDate}T${time}:00:00`);\n      const timeFormat = format(date, TIME_FORMAT.BASE_HOURS_TIME);\n      return timeFormat.toLowerCase().replace(/\\s/g, \"\");\n    }\n\n    return `${time}:00`;\n  };\n\n  return { time, dividers, formatTime };\n}\n","import * as React from \"react\";\n\n// Import interfaces\nimport { Program as ProgramType } from \"../helpers/interfaces\";\nimport { BaseTimeFormat } from \"../helpers/types\";\n\n// Import types\nimport { ProgramItem } from \"../helpers/types\";\n\n// Import styles\nimport { ProgramStyled } from \"../styles\";\n\n// Import hooks\nimport { useProgram } from \"../hooks\";\n\ninterface ProgramProps<T> {\n  isRTL?: boolean;\n  isBaseTimeFormat: BaseTimeFormat;\n  program: T;\n  onClick?: (v: ProgramType) => void;\n}\n\nconst {\n  ProgramBox,\n  ProgramContent,\n  ProgramFlex,\n  ProgramStack,\n  ProgramTitle,\n  ProgramText,\n  ProgramImage,\n} = ProgramStyled;\n\nexport function Program<T extends ProgramItem>({\n  program,\n  onClick,\n  ...rest\n}: ProgramProps<T>) {\n  const {\n    isRTL,\n    isLive,\n    isMinWidth,\n    styles,\n    formatTime,\n    set12HoursTimeFormat,\n    getRTLSinceTime,\n    getRTLTillTime,\n  } = useProgram({\n    program,\n    ...rest,\n  });\n\n  const { data } = program;\n  const { image, title, since, till } = data;\n\n  const handleOnContentClick = () => onClick?.(data);\n\n  const sinceTime = formatTime(\n    getRTLSinceTime(since),\n    set12HoursTimeFormat()\n  ).toLowerCase();\n  const tillTime = formatTime(\n    getRTLTillTime(till),\n    set12HoursTimeFormat()\n  ).toLowerCase();\n\n  return (\n    <ProgramBox\n      data-testid=\"program-item\"\n      width={styles.width}\n      style={styles.position}\n    >\n      <ProgramContent\n        data-testid=\"program-content\"\n        width={styles.width}\n        isLive={isLive}\n        onClick={handleOnContentClick}\n        {...rest}\n      >\n        <ProgramFlex>\n          {isLive && isMinWidth && <ProgramImage src={image} alt=\"Preview\" />}\n          <ProgramStack isRTL={isRTL}>\n            <ProgramTitle>{title}</ProgramTitle>\n            <ProgramText aria-label=\"program time\">\n              {sinceTime} - {tillTime}\n            </ProgramText>\n          </ProgramStack>\n        </ProgramFlex>\n      </ProgramContent>\n    </ProgramBox>\n  );\n}\n","import * as React from \"react\";\n// Import interfaces\nimport { ChannelWithPosiiton } from \"../helpers/types\";\n\n// Import styles\nimport { ChannelsStyled } from \"../styles\";\n\n// Import Components\nimport { Channel } from \"../components\";\n\ninterface ChannelsProps {\n  isTimeline: boolean;\n  isRTL: boolean;\n  isChannelVisible: (position: any) => boolean;\n  channels: ChannelWithPosiiton[];\n  scrollY: number;\n  sidebarWidth: number;\n  renderChannel?: (v: { channel: ChannelWithPosiiton }) => React.ReactNode;\n}\n\nconst { Box } = ChannelsStyled;\n\nexport function Channels(props: ChannelsProps) {\n  const { channels, scrollY, sidebarWidth, renderChannel } = props;\n  const { isRTL, isTimeline, isChannelVisible } = props;\n\n  const renderChannels = (channel: ChannelWithPosiiton) => {\n    const isVisible = isChannelVisible(channel.position);\n    if (isVisible) {\n      if (renderChannel) return renderChannel({ channel });\n      return <Channel key={channel.uuid} channel={channel} />;\n    }\n    return null;\n  };\n\n  return (\n    <Box\n      data-testid=\"sidebar\"\n      isRTL={isRTL}\n      isTimeline={isTimeline}\n      width={sidebarWidth}\n      bottom={scrollY}\n    >\n      {channels.map(renderChannels)}\n    </Box>\n  );\n}\n","import * as React from \"react\";\n\n// Import interfaces\nimport { ChannelWithPosiiton } from \"../helpers/types\";\n\n// Import styles\nimport { ChannelStyled } from \"../styles\";\n\ninterface ChannelProps<T> {\n  channel: T;\n  onClick?: (v: ChannelWithPosiiton) => void;\n}\n\nconst { ChannelBox, ChannelLogo } = ChannelStyled;\n\nexport function Channel<T extends ChannelWithPosiiton>({\n  channel,\n  onClick,\n  ...rest\n}: ChannelProps<T>) {\n  const { position, logo } = channel;\n  return (\n    <ChannelBox\n      data-testid=\"sidebar-item\"\n      onClick={() => onClick?.(channel)}\n      {...position}\n      {...rest}\n    >\n      <ChannelLogo src={logo} alt=\"Logo\" />\n    </ChannelBox>\n  );\n}\n","import * as React from \"react\";\n\n// Import types\nimport { BaseTimeFormat } from \"../helpers/types\";\n\n// Import styles\nimport { TimelineStyled } from \"../styles\";\n\n// Import hooks\nimport { useTimeline } from \"../hooks\";\n\nconst {\n  TimelineWrapper,\n  TimelineBox,\n  TimelineTime,\n  TimelineDividers,\n  TimelineDivider,\n} = TimelineStyled;\n\ninterface TimelineProps {\n  isRTL?: boolean;\n  isBaseTimeFormat: BaseTimeFormat;\n  isSidebar: boolean;\n  dayWidth: number;\n  hourWidth: number;\n  numberOfHoursInDay: number;\n  offsetStartHoursRange: number;\n  sidebarWidth: number;\n}\n\nexport function Timeline({\n  isRTL,\n  isBaseTimeFormat,\n  isSidebar,\n  dayWidth,\n  hourWidth,\n  numberOfHoursInDay,\n  offsetStartHoursRange,\n  sidebarWidth,\n}: TimelineProps) {\n  const { time, dividers, formatTime } = useTimeline(\n    numberOfHoursInDay,\n    isBaseTimeFormat\n  );\n\n  const renderTime = (index: number) => (\n    <TimelineBox data-testid=\"timeline-item\" key={index} width={hourWidth}>\n      <TimelineTime isBaseTimeFormat={isBaseTimeFormat} isRTL={isRTL}>\n        {formatTime(index + offsetStartHoursRange)}\n      </TimelineTime>\n      <TimelineDividers>{renderDividers()}</TimelineDividers>\n    </TimelineBox>\n  );\n\n  const renderDividers = () =>\n    dividers.map((_, index) => (\n      <TimelineDivider key={index} width={hourWidth} />\n    ));\n\n  return (\n    <TimelineWrapper\n      data-testid=\"timeline\"\n      dayWidth={dayWidth}\n      sidebarWidth={sidebarWidth}\n      isSidebar={isSidebar}\n    >\n      {time.map((_, index) => renderTime(index))}\n    </TimelineWrapper>\n  );\n}\n","import React from \"react\";\nimport { startOfDay } from \"date-fns\";\n\n// Import types\nimport { DateTime } from \"../../helpers/types\";\n\n// Import helpers\nimport { HOUR_IN_MINUTES, PROGRAM_REFRESH, getPositionX } from \"../../helpers\";\n\n// Import hooks\nimport { useInterval } from \"../../hooks\";\n\ninterface useLineProps {\n  startDate: DateTime;\n  endDate: DateTime;\n  dayWidth: number;\n  hourWidth: number;\n  sidebarWidth: number;\n}\n\nexport function useLine({\n  startDate,\n  endDate,\n  dayWidth,\n  hourWidth,\n  sidebarWidth,\n}: useLineProps) {\n  const initialState =\n    getPositionX(\n      startOfDay(new Date(startDate)),\n      new Date(),\n      startDate,\n      endDate,\n      hourWidth\n    ) + sidebarWidth;\n  const [positionX, setPositionX] = React.useState<number>(() => initialState);\n\n  const isDayEnd = positionX <= dayWidth;\n  const isScrollX = React.useMemo(() => (isDayEnd ? PROGRAM_REFRESH : null), [\n    isDayEnd,\n  ]);\n\n  useInterval(() => {\n    const offset = hourWidth / HOUR_IN_MINUTES;\n    const positionOffset = offset * 2;\n    setPositionX((prev) => prev + positionOffset);\n  }, isScrollX);\n\n  React.useEffect(() => {\n    const date = new Date(startDate);\n    const positionX = getPositionX(\n      startOfDay(date),\n      new Date(),\n      startDate,\n      endDate,\n      hourWidth\n    );\n    const newPositionX = positionX + sidebarWidth;\n    setPositionX(newPositionX);\n  }, [startDate, endDate, sidebarWidth, hourWidth]);\n\n  return { positionX };\n}\n","import * as React from \"react\";\nimport { isToday } from \"date-fns\";\n\n// Import types\nimport { DateTime } from \"../../helpers/types\";\n\n// Import styles\nimport { LineStyled } from \"../../styles\";\n\n// Import components\nimport { useLine } from \"./useLine\";\n\ninterface LineProps {\n  height: number;\n  startDate: DateTime;\n  endDate: DateTime;\n  dayWidth: number;\n  hourWidth: number;\n  sidebarWidth: number;\n}\n\nconst { Box } = LineStyled;\n\nexport function Line({\n  height,\n  startDate,\n  endDate,\n  dayWidth,\n  hourWidth,\n  sidebarWidth,\n}: LineProps) {\n  const { positionX } = useLine({\n    startDate,\n    endDate,\n    dayWidth,\n    hourWidth,\n    sidebarWidth,\n  });\n\n  const date = new Date(startDate);\n  if (!isToday(date)) return null;\n\n  return <Box height={height} left={positionX} />;\n}\n","import * as React from \"react\";\nimport { theme } from \"../theme/theme\";\n\n// Import styles\nimport { LoaderStyled } from \"../styles\";\n\nconst { Box, Shape } = LoaderStyled;\n\nconst Element = ({\n  width,\n  color,\n  animate,\n  marginRight,\n  transition,\n}: {\n  width: number;\n  color: string;\n  transition: { duration: number; ease?: string; delay?: number };\n  animate: { right: string[] };\n  marginRight?: number;\n}) => (\n  <Shape\n    className=\"SHAPE\"\n    width={width}\n    color={color}\n    animate={animate}\n    transition={transition}\n    marginRight={marginRight}\n  />\n);\n\nexport function Loader() {\n  return (\n    <Box aria-label=\"loading\">\n      <div>\n        <div\n          style={{ display: \"flex\", justifyContent: \"end\", marginBottom: 16 }}\n        >\n          <Element\n            animate={{\n              right: [\"0px\", \"75px\", \"0px\"],\n            }}\n            transition={{\n              duration: 1,\n            }}\n            width={217}\n            color={theme.loader.teal}\n            marginRight={10}\n          />\n          <Element\n            width={122}\n            color={theme.loader.purple}\n            animate={{\n              right: [\"0px\", \"50px\", \"0px\"],\n            }}\n            transition={{\n              duration: 1,\n              delay: 0.02,\n            }}\n          />\n        </div>\n        <div\n          style={{ display: \"flex\", justifyContent: \"end\", marginBottom: 16 }}\n        >\n          <Element\n            width={267}\n            color={theme.loader.pink}\n            animate={{\n              right: [\"0px\", \"70px\", \"0px\"],\n            }}\n            transition={{\n              delay: 0.5,\n              duration: 1,\n            }}\n          />\n        </div>\n        <div style={{ display: \"flex\", justifyContent: \"end\" }}>\n          <Element\n            width={217}\n            color={theme.loader.purple}\n            marginRight={10}\n            animate={{\n              right: [\"0px\", \"95px\", \"0px\"],\n            }}\n            transition={{\n              delay: 0.3,\n              duration: 1,\n            }}\n          />\n          <Element\n            width={80}\n            color={theme.loader.teal}\n            animate={{\n              right: [\"0px\", \"70px\", \"0px\"],\n            }}\n            transition={{\n              duration: 1,\n              delay: 0.33,\n            }}\n          />\n        </div>\n      </div>\n    </Box>\n  );\n}\n","import React from \"react\";\nimport { ThemeProvider, Global } from \"@emotion/react\";\n\n// Import interfaces\nimport { Theme } from \"./helpers/interfaces\";\n\n// Import helpers\nimport { TIMELINE_HEIGHT } from \"./helpers\";\n\n// Import styles\nimport { globalStyles, EpgStyled } from \"./styles\";\n\n// Import components\nimport { Loader } from \"./components\";\n\ninterface EpgProps {\n  width?: number;\n  height?: number;\n  isRTL?: boolean;\n  isSidebar: boolean;\n  isTimeline?: boolean;\n  isLoading?: boolean;\n  children: React.ReactNode;\n  loader?: React.ReactNode;\n  theme: Theme;\n  globalStyles?: string;\n  sidebarWidth: number;\n}\n\nconst { Container, Wrapper, Box } = EpgStyled;\n\nexport const Epg = React.forwardRef<HTMLDivElement, EpgProps>(\n  (\n    {\n      children,\n      width,\n      height,\n      sidebarWidth,\n      theme,\n      globalStyles: customGlobalStyles,\n      isRTL = false,\n      isSidebar = true,\n      isTimeline = true,\n      isLoading = false,\n      loader: LoaderComponent,\n      ...rest\n    },\n    containerRef\n  ) => {\n    const renderLoader = () => LoaderComponent ?? <Loader />;\n    const epgGlobalStyles = customGlobalStyles ?? globalStyles;\n    return (\n      <ThemeProvider theme={theme}>\n        <Global styles={epgGlobalStyles} />\n        <Container\n          className=\"planby\"\n          data-testid=\"container\"\n          width={width}\n          height={height}\n          ref={containerRef}\n          {...rest}\n        >\n          <Wrapper>\n            {isSidebar && isTimeline && (\n              <Box\n                isRTL={isRTL}\n                width={sidebarWidth}\n                height={TIMELINE_HEIGHT}\n                left={0}\n                top={0}\n              />\n            )}\n            {isLoading && renderLoader()}\n            {children}\n          </Wrapper>\n        </Container>\n      </ThemeProvider>\n    );\n  }\n);\n","import { ProgramStyled, ChannelStyled, TimelineStyled } from \"./styles\";\n\n// Import types\nimport { Theme as ThemeType, Program as IProgram } from \"./helpers/interfaces\";\nimport {\n  ProgramItem as ProgramItemType,\n  ChannelWithPosiiton,\n  BaseTimeFormat as BaseTimeFormatType,\n} from \"./helpers/types\";\n\n// Types\nexport type Theme = ThemeType;\nexport type Channel = ChannelWithPosiiton;\nexport type Program = IProgram;\nexport type ProgramItem = {\n  program: ProgramItemType;\n  isRTL: boolean;\n  isBaseTimeFormat: BaseTimeFormatType;\n};\n\n// Components\nexport { Layout } from \"./components\";\nexport { Epg } from \"./Epg\";\nexport { useEpg, useProgram, useTimeline } from \"./hooks\";\n\n// Styles\nconst { ChannelBox, ChannelLogo } = ChannelStyled;\n\nconst {\n  ProgramBox,\n  ProgramContent,\n  ProgramFlex,\n  ProgramStack,\n  ProgramTitle,\n  ProgramText,\n  ProgramImage,\n} = ProgramStyled;\n\nconst {\n  TimelineWrapper,\n  TimelineBox,\n  TimelineTime,\n  TimelineDivider,\n  TimelineDividers,\n} = TimelineStyled;\n\nexport {\n  // Channel\n  ChannelBox,\n  ChannelLogo,\n  // Program\n  ProgramBox,\n  ProgramContent,\n  ProgramFlex,\n  ProgramStack,\n  ProgramTitle,\n  ProgramText,\n  ProgramImage,\n  // Timeline\n  TimelineWrapper,\n  TimelineBox,\n  TimelineTime,\n  TimelineDividers,\n  TimelineDivider,\n};\n"],"names":["globalStyles","css","Container","height","width","Wrapper","ScrollBox","theme","primary","isRTL","scrollbar","thumb","bg","white","Box","top","left","Content","isSidebar","sidebarWidth","bottom","ChannelBox","ChannelLogo","ProgramBox","ProgramContent","gradient","blue","isLive","ProgramFlex","Elipsis","ProgramTitle","grey","ProgramText","text","ProgramImage","ProgramStack","DAY_WIDTH","HOUR_IN_MINUTES","TIMELINE_HEIGHT","SIDEBAR_WIDTH","ITEM_HEIGHT","ITEM_OVERSCAN","DEBOUNCE_WAIT","DEBOUNCE_WAIT_MAX","PROGRAM_REFRESH","TIME_FORMAT","DEFAULT","DATE","HOURS_MIN","BASE_HOURS_TIME","omit","obj","result","props","property","generateArray","num","Array","fill","getProgramOptions","program","position","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","getDate","date","Date","abs","Math","getDayWidthResources","dayWidth","startDate","endDate","startDateTime","endDateTime","console","error","offsetStartHoursRange","differenceInHours","startOfDay","numberOfHoursInDay","hourWidth","floor","newDayWidth","getTime","getLiveStatus","since","till","nowTime","sinceTime","sinceTill","formatTime","format","replace","roundToMinutes","roundToNearestMinutes","isYesterday","isFutureTime","dateTime","now","getTimeRangeDates","endDateValue","addDays","getItemDiffWidth","diff","getPositionX","isTomorrow","diffTime","differenceInMinutes","getChannelPosition","channelIndex","itemHeight","getProgramPosition","item","isYesterdayTime","edgeEnd","data","getConvertedPrograms","channels","map","next","findIndex","uuid","channelUuid","getConvertedChannels","channel","index","getItemVisibility","scrollY","scrollX","containerHeight","containerWidth","itemOverscan","getSidebarItemVisibility","TimelineTime","isBaseTimeFormat","TimelineDividers","TimelineDivider","timeline","divider","TimelineWrapper","TimelineBox","green","time","moveLeft","animate","keyframes","right","loader","Shape","color","marginRight","transition","duration","ease","delay","EpgStyled","Layout","React","forwardRef","scrollBoxRef","programs","isTimeline","isLine","onScroll","isProgramVisible","isChannelVisible","renderProgram","renderChannel","renderTimeline","channelsLength","length","contentHeight","useMemo","isFuture","renderPrograms","isVisible","options","Program","key","id","renderTopbar","timeProps","Timeline","ref","Line","Channels","teal","purple","pink","border","useLayout","useIsomorphicEffect","containerRef","useRef","useState","setScrollY","setScrollX","layoutWidth","setLayoutWidth","layoutHeight","setLayoutHeight","isToday","isTodayFns","handleScrollDebounced","useDebouncedCallback","value","y","x","maxWait","handleOnScroll","useCallback","e","target","scrollTop","scrollLeft","handleOnScrollToNow","current","clientWidth","newDate","scrollPosition","startOfToday","scrollNow","handleOnScrollTop","handleOnScrollRight","handleOnScrollLeft","handleResizeDebounced","container","clientHeight","addEventListener","removeEventListener","onScrollToNow","onScrollTop","onScrollLeft","onScrollRight","defaultStartDateTime","useEpg","channelsEpg","epg","startDateInput","endDateInput","customTheme","customDayWidth","dayWidthResourcesProps","layoutProps","defaultTheme","getEpgProps","getLayoutProps","useInterval","callback","savedCallback","setInterval","clearInterval","useProgram","minWidth","setIsLive","newPosition","formatType","set12HoursTimeFormat","getRTLSinceTime","getRTLTillTime","status","isMinWidth","styles","useTimeline","dividers","baseDate","timeFormat","toLowerCase","ProgramStyled","onClick","rest","image","title","handleOnContentClick","tillTime","style","src","alt","ChannelsStyled","renderChannels","Channel","ChannelStyled","logo","TimelineStyled","renderTime","renderDividers","_","useLine","initialState","positionX","setPositionX","isDayEnd","isScrollX","offset","positionOffset","prev","newPositionX","LineStyled","LoaderStyled","Element","className","Loader","display","justifyContent","marginBottom","Epg","children","customGlobalStyles","isLoading","LoaderComponent","renderLoader","epgGlobalStyles","ThemeProvider","Global"],"mappings":"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"}