{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useMemo, useCallback, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchAllChannels, toISOStringWithTimezone } from \"./helpers\";\nimport { useEpg } from \"planby\";\n\n// Import theme\nimport { theme } from \"./helpers/theme\";\nfunction roundMinutes(date) {\n  date.setHours(date.getHours() + Math.round(date.getMinutes() / 60));\n  date.setMinutes(0, 0, 0); // Resets also seconds and milliseconds\n  return toISOStringWithTimezone(date).slice(0, 19);\n}\nexport function useApp() {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    list: channelsList\n  } = useSelector(state => state.channels);\n  const {\n    list: epgList\n  } = useSelector(state => state.epg);\n  const [channels, setChannels] = useState([]);\n  const [epg, setEpg] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const date = new Date();\n  // const startDate = date.getUTCFullYear() + \"/\" +\n  // (\"0\" + (date.getUTCMonth()+1)).slice(-2) + \"/\" +\n  // (\"0\" + date.getUTCDate()).slice(-2);\n  // const startDate2 = toISOStringWithTimezone(new Date()).slice(0, 19)\n\n  const startDate = roundMinutes(date);\n  console.log(\"startDate\", startDate);\n  const channelsData = useMemo(() => channels, [channels]);\n  const epgData = useMemo(() => epg, [epg]);\n  const {\n    getEpgProps,\n    getLayoutProps\n  } = useEpg({\n    channels: channelsData,\n    epg: epgData,\n    dayWidth: 7200,\n    sidebarWidth: 100,\n    itemHeight: 80,\n    isSidebar: true,\n    isTimeline: true,\n    isLine: true,\n    startDate: startDate,\n    // endDate: \"2023-01-10T22:00:00\",\n    isBaseTimeFormat: true,\n    theme\n  });\n  const handleFetchResources = useCallback(async () => {\n    setChannels(channelsList);\n    setEpg(epgList);\n  }, [channelsList, epgList]);\n  useEffect(() => {\n    dispatch(fetchAllChannels());\n  }, [dispatch]);\n  useEffect(() => {\n    if (!channelsList.length && !epgList.length) {\n      setIsLoading(true);\n    } else {\n      setIsLoading(false);\n      handleFetchResources();\n    }\n  }, [handleFetchResources, channelsList, epgList]);\n  return {\n    getEpgProps,\n    getLayoutProps,\n    isLoading\n  };\n}\n_s(useApp, \"+Yomw6WUbuHXwEbdub5LZZ2bQBA=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useEpg];\n});","map":{"version":3,"names":["useState","useMemo","useCallback","useEffect","useDispatch","useSelector","fetchAllChannels","toISOStringWithTimezone","useEpg","theme","roundMinutes","date","setHours","getHours","Math","round","getMinutes","setMinutes","slice","useApp","dispatch","list","channelsList","state","channels","epgList","epg","setChannels","setEpg","isLoading","setIsLoading","Date","startDate","console","log","channelsData","epgData","getEpgProps","getLayoutProps","dayWidth","sidebarWidth","itemHeight","isSidebar","isTimeline","isLine","isBaseTimeFormat","handleFetchResources","length"],"sources":["/Users/anabarbosa/Code/Tests/react-redux-monkey/src/useApp.js"],"sourcesContent":["import { useState, useMemo, useCallback, useEffect } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchAllChannels, toISOStringWithTimezone } from \"./helpers\";\nimport { useEpg } from \"planby\";\n\n// Import theme\nimport { theme } from \"./helpers/theme\";\n\nfunction roundMinutes(date) {\n\t\tdate.setHours(date.getHours() + Math.round(date.getMinutes()/60));\n\t\tdate.setMinutes(0, 0, 0); // Resets also seconds and milliseconds\n\t\treturn toISOStringWithTimezone(date).slice(0, 19);\n\t}\n\nexport function useApp() {\n\tconst dispatch = useDispatch();\n\tconst { list: channelsList } = useSelector(state => state.channels);\n\tconst { list: epgList } = useSelector(state => state.epg);\n\tconst [channels, setChannels] = useState([]);\n\tconst [epg, setEpg] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tconst date = new Date()\n\t// const startDate = date.getUTCFullYear() + \"/\" +\n    // (\"0\" + (date.getUTCMonth()+1)).slice(-2) + \"/\" +\n    // (\"0\" + date.getUTCDate()).slice(-2);\n\t// const startDate2 = toISOStringWithTimezone(new Date()).slice(0, 19)\n\n\tconst startDate = roundMinutes(date);\t\n\tconsole.log(\"startDate\", startDate)\n\n\tconst channelsData = useMemo(() => channels, [channels]);\n\tconst epgData = useMemo(() => epg, [epg]);\n\n\tconst { getEpgProps, getLayoutProps } = useEpg({\n\t\tchannels: channelsData,\n\t\tepg: epgData,\n\t\tdayWidth: 7200,\n\t\tsidebarWidth: 100,\n\t\titemHeight: 80,\n\t\tisSidebar: true,\n\t\tisTimeline: true,\n\t\tisLine: true,\n\t\tstartDate: startDate,\n\t\t// endDate: \"2023-01-10T22:00:00\",\n\t\tisBaseTimeFormat: true,\n\t\ttheme\n\t});\n\n\tconst handleFetchResources = useCallback(async () => {\n\t\tsetChannels(channelsList);\n\t\tsetEpg(epgList);\n\t}, [channelsList, epgList]);\n\n\tuseEffect(() => {\n\t\tdispatch(fetchAllChannels())\n\t}, [dispatch]);\n\n\tuseEffect(() => {\n\t\tif(!channelsList.length && !epgList.length) {\n\t\t\tsetIsLoading(true);\n\t\t} else {\n\t\t\tsetIsLoading(false);\n\t\t\thandleFetchResources()\n\t\t}\n\t}, [handleFetchResources, channelsList, epgList]);\n\n\treturn { getEpgProps, getLayoutProps, isLoading };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}