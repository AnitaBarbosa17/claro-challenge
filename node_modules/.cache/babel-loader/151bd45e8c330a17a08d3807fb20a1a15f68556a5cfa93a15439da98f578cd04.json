{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useMemo, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { API_URL, transformChannels, transformEgp, roundMinutes } from \"./helpers\";\nimport { useEpg } from \"planby\";\nimport { theme } from \"./helpers/theme\";\nconst globalStyles = `\n\t.planby {\n\t\tfont-family: \"Poppins\" sans-serif;\n\t}\n`;\nexport function useApp() {\n  _s();\n  const [channelsList, setChannelsList] = useState([]);\n  const [channels, setChannels] = useState([]);\n  const [epg, setEpg] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  function fetchAllChannels() {\n    setIsLoading(true);\n    axios.get(API_URL).then(res => res.data).then(data => {\n      setChannelsList(data.response.channels);\n      setIsLoading(false);\n    });\n  }\n  const date = new Date();\n  const startDate = roundMinutes(date);\n  const channelsData = useMemo(() => channels, [channels]);\n  const epgData = useMemo(() => epg, [epg]);\n  const {\n    getEpgProps,\n    getLayoutProps\n  } = useEpg({\n    channels: channelsData,\n    epg: epgData,\n    dayWidth: 7200,\n    sidebarWidth: 150,\n    itemHeight: 80,\n    isSidebar: true,\n    isTimeline: true,\n    isLine: true,\n    startDate: startDate,\n    isBaseTimeFormat: true,\n    theme,\n    globalStyles\n  });\n  useEffect(() => {\n    fetchAllChannels();\n  }, []);\n  useEffect(() => {\n    if (channelsList.length !== 0) {\n      const formatedChannels = transformChannels(channelsList);\n      const formatedEpg = transformEgp(channelsList);\n      setChannels(formatedChannels);\n      setEpg(formatedEpg);\n    }\n  }, [channelsList]);\n  return {\n    getEpgProps,\n    getLayoutProps,\n    isLoading\n  };\n}\n_s(useApp, \"iut51IK9Qco3OJmWhvOhBRX+wEs=\", false, function () {\n  return [useEpg];\n});","map":{"version":3,"names":["useState","useMemo","useEffect","axios","API_URL","transformChannels","transformEgp","roundMinutes","useEpg","theme","globalStyles","useApp","channelsList","setChannelsList","channels","setChannels","epg","setEpg","isLoading","setIsLoading","fetchAllChannels","get","then","res","data","response","date","Date","startDate","channelsData","epgData","getEpgProps","getLayoutProps","dayWidth","sidebarWidth","itemHeight","isSidebar","isTimeline","isLine","isBaseTimeFormat","length","formatedChannels","formatedEpg"],"sources":["/Users/anabarbosa/Code/Tests/react-redux-monkey/src/useApp.js"],"sourcesContent":["import { useState, useMemo, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { API_URL, transformChannels, transformEgp, roundMinutes } from \"./helpers\";\nimport { useEpg } from \"planby\";\nimport { theme } from \"./helpers/theme\";\n\nconst globalStyles = `\n\t.planby {\n\t\tfont-family: \"Poppins\" sans-serif;\n\t}\n`;\n\nexport function useApp() {\n\tconst [channelsList, setChannelsList] = useState([]);\n\tconst [channels, setChannels] = useState([]);\n\tconst [epg, setEpg] = useState([]);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tfunction fetchAllChannels() {\n\t\tsetIsLoading(true)\n\t\taxios.get(API_URL)\n\t\t\t.then(res => res.data) \n\t\t\t.then(data => {\n\t\t\t\tsetChannelsList(data.response.channels);\n\t\t\t\tsetIsLoading(false);\n\t\t\t})\n\t}\n\t\n\tconst date = new Date()\n\tconst startDate = roundMinutes(date);\t\n\n\tconst channelsData = useMemo(() => channels, [channels]);\n\tconst epgData = useMemo(() => epg, [epg]);\n\n\tconst { getEpgProps, getLayoutProps } = useEpg({\n\t\tchannels: channelsData,\n\t\tepg: epgData,\n\t\tdayWidth: 7200,\n\t\tsidebarWidth: 150,\n\t\titemHeight: 80,\n\t\tisSidebar: true,\n\t\tisTimeline: true,\n\t\tisLine: true,\n\t\tstartDate: startDate,\n\t\tisBaseTimeFormat: true,\n\t\ttheme,\n\t\tglobalStyles\n\t});\n\n\tuseEffect(() => {\n\t\tfetchAllChannels();\n\t}, []);\n\t\n\tuseEffect(() => {\n\t\tif (channelsList.length !== 0) {\n\t\t\tconst formatedChannels = transformChannels(channelsList)\n\t\t\tconst formatedEpg = transformEgp(channelsList)\n\t\t\tsetChannels(formatedChannels)\n\t\t\tsetEpg(formatedEpg);\n\t\t}\n\t}, [channelsList]);\n\n\treturn { getEpgProps, getLayoutProps, isLoading };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,OAAO,EAAEC,SAAS,QAAQ,OAAO;AACpD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,EAAEC,iBAAiB,EAAEC,YAAY,EAAEC,YAAY,QAAQ,WAAW;AAClF,SAASC,MAAM,QAAQ,QAAQ;AAC/B,SAASC,KAAK,QAAQ,iBAAiB;AAEvC,MAAMC,YAAY,GAAI;AACtB;AACA;AACA;AACA,CAAC;AAED,OAAO,SAASC,MAAM,GAAG;EAAA;EACxB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACgB,GAAG,EAAEC,MAAM,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAClC,MAAM,CAACkB,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAEjD,SAASoB,gBAAgB,GAAG;IAC3BD,YAAY,CAAC,IAAI,CAAC;IAClBhB,KAAK,CAACkB,GAAG,CAACjB,OAAO,CAAC,CAChBkB,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CACrBF,IAAI,CAACE,IAAI,IAAI;MACbX,eAAe,CAACW,IAAI,CAACC,QAAQ,CAACX,QAAQ,CAAC;MACvCK,YAAY,CAAC,KAAK,CAAC;IACpB,CAAC,CAAC;EACJ;EAEA,MAAMO,IAAI,GAAG,IAAIC,IAAI,EAAE;EACvB,MAAMC,SAAS,GAAGrB,YAAY,CAACmB,IAAI,CAAC;EAEpC,MAAMG,YAAY,GAAG5B,OAAO,CAAC,MAAMa,QAAQ,EAAE,CAACA,QAAQ,CAAC,CAAC;EACxD,MAAMgB,OAAO,GAAG7B,OAAO,CAAC,MAAMe,GAAG,EAAE,CAACA,GAAG,CAAC,CAAC;EAEzC,MAAM;IAAEe,WAAW;IAAEC;EAAe,CAAC,GAAGxB,MAAM,CAAC;IAC9CM,QAAQ,EAAEe,YAAY;IACtBb,GAAG,EAAEc,OAAO;IACZG,QAAQ,EAAE,IAAI;IACdC,YAAY,EAAE,GAAG;IACjBC,UAAU,EAAE,EAAE;IACdC,SAAS,EAAE,IAAI;IACfC,UAAU,EAAE,IAAI;IAChBC,MAAM,EAAE,IAAI;IACZV,SAAS,EAAEA,SAAS;IACpBW,gBAAgB,EAAE,IAAI;IACtB9B,KAAK;IACLC;EACD,CAAC,CAAC;EAEFR,SAAS,CAAC,MAAM;IACfkB,gBAAgB,EAAE;EACnB,CAAC,EAAE,EAAE,CAAC;EAENlB,SAAS,CAAC,MAAM;IACf,IAAIU,YAAY,CAAC4B,MAAM,KAAK,CAAC,EAAE;MAC9B,MAAMC,gBAAgB,GAAGpC,iBAAiB,CAACO,YAAY,CAAC;MACxD,MAAM8B,WAAW,GAAGpC,YAAY,CAACM,YAAY,CAAC;MAC9CG,WAAW,CAAC0B,gBAAgB,CAAC;MAC7BxB,MAAM,CAACyB,WAAW,CAAC;IACpB;EACD,CAAC,EAAE,CAAC9B,YAAY,CAAC,CAAC;EAElB,OAAO;IAAEmB,WAAW;IAAEC,cAAc;IAAEd;EAAU,CAAC;AAClD;AAAC,GAnDeP,MAAM;EAAA,QAsBmBH,MAAM;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}